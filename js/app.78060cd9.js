(function(t){function e(e){for(var i,a,r=e[0],c=e[1],l=e[2],d=0,h=[];d<r.length;d++)a=r[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&h.push(s[a][0]),s[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(h.length)h.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(i=!1)}i&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},s={app:0},o=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/ebook-demo/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1458:function(t,e,n){},"3d0e":function(t,e,n){},"42f4":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],a={components:{}};window.onload=function(){document.addEventListener("touchstart",(function(t){t.touches.length>1&&t.preventDefault()}));var t=0;document.addEventListener("touchend",(function(e){var n=(new Date).getTime();n-t<=300&&e.preventDefault(),t=n}),!1),document.addEventListener("gesturestart",(function(t){t.preventDefault()}))},document.addEventListener("DOMContentLoaded",(function(){var t=window.innerWidth/10;t=t>50?50:t;var e=document.querySelector("html");e.style.fontSize=t+"px"})),window.onresize=function(){var t=window.innerWidth/10;t=t>50?50:t;var e=document.querySelector("html");e.style.fontSize=t+"px"};var r=a,c=n("2877"),l=Object(c["a"])(r,s,o,!1,null,null,null),u=l.exports,d=n("8c4f"),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"book"},[n("Title-Bar",{attrs:{ifTitleAndMenuShow:t.ifTitleAndMenuShow}}),n("div",{staticClass:"read-wrapper"},[n("div",{style:{background:t.themeColor},attrs:{id:"read"}}),n("div",{staticClass:"mask"},[n("div",{staticClass:"mask__left",on:{click:t.lastPage}}),n("div",{staticClass:"mask__center",on:{click:t.toggleTitleAndMenu}}),n("div",{staticClass:"mask__right",on:{click:t.nextPage}})])]),n("Menu-Bar",{ref:"menuBar",attrs:{ifTitleAndMenuShow:t.ifTitleAndMenuShow,fontSizeList:t.fontSizeList,defaultFontSize:t.defaultFontSize,themeList:t.themeList,defaultTheme:t.defaultTheme,bookAvailable:t.bookAvailable,progress:t.progress,navigation:t.navigation},on:{setFontSize:t.setFontSize,setTheme:t.setTheme,onProgressChange:t.onProgressChange,jumpTo:t.jumpTo}})],1)},f=[],p=(n("4160"),n("b0c0"),n("159b"),n("a211")),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"slide-down"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.ifTitleAndMenuShow,expression:"ifTitleAndMenuShow"}],staticClass:"title-wrapper"},[n("div",{staticClass:"left"},[n("span",{staticClass:"icon-back icon"})]),n("div",{staticClass:"right"},[n("div",{staticClass:"icon-wrapper"},[n("span",{staticClass:"icon-cart icon"})]),n("div",{staticClass:"icon-wrapper"},[n("span",{staticClass:"icon-person icon"})]),n("div",{staticClass:"icon-wrapper"},[n("span",{staticClass:"icon-more icon"})])])])])},m=[],g={props:{ifTitleAndMenuShow:{type:Boolean,default:!1}}},w=g,S=(n("780b"),Object(c["a"])(w,v,m,!1,null,"24d83096",null)),b=S.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menu-bar"},[n("transition",{attrs:{name:"slide-up"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.ifSettingShow,expression:"ifSettingShow"}],ref:"setting",staticClass:"setting-wrapper"},[0==t.showTag?n("div",{staticClass:"setting-font-size"},[n("div",{ref:"preview",staticClass:"preview",style:{fontSize:t.fontSizeList[0].fontSize+"px",transform:t.previewTranslateRight}},[t._v("A")]),n("div",{ref:"select",staticClass:"select"},t._l(t.fontSizeList,(function(e,i){return n("div",{key:i,staticClass:"select-wrapper",on:{click:function(n){return t.setFontSize(e.fontSize)}}},[n("div",{staticClass:"line"}),n("div",{staticClass:"point-wrapper"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.fontSize===t.defaultFontSize,expression:"item.fontSize === defaultFontSize"}],staticClass:"point"},[n("div",{staticClass:"point-small"})])]),n("div",{staticClass:"line"})])})),0),n("div",{staticClass:"preview",style:{fontSize:t.fontSizeList[t.fontSizeList.length-1].fontSize+"px",transform:t.previewTranslateLeft}},[t._v("A ")])]):1==t.showTag?n("div",{staticClass:"setting-theme"},t._l(t.themeList,(function(e,i){return n("div",{key:i,staticClass:"setting-theme-item",on:{click:function(e){return t.setTheme(i)}}},[n("div",{staticClass:"preview",class:{border:"#fff"===e.style.body.background},style:{background:e.style.body.background}}),n("div",{staticClass:"text",class:{selected:i===t.defaultTheme}},[t._v(t._s(e.name))])])})),0):2==t.showTag?n("div",{staticClass:"setting-progress"},[n("div",{staticClass:"progress-wrapper"},[n("input",{ref:"progress",staticClass:"progress",attrs:{type:"range",max:"100",min:"0",step:"1",disabled:!t.bookAvailable},domProps:{value:t.progress},on:{change:t.onProgressChange,input:t.onProgressChange}}),n("span",{staticClass:"text"},[t._v(" "+t._s(t.bookAvailable?t.progress+"%":"加载中...")+" ")])])]):t._e()])]),n("transition",{attrs:{name:"slide-up"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.ifTitleAndMenuShow,expression:"ifTitleAndMenuShow"}],staticClass:"menu-wrapper",class:{"hide-box-shadow":t.ifSettingShow||!t.ifTitleAndMenuShow}},[n("div",{staticClass:"icon-wrapper",on:{click:function(e){return t.showSetting(3)}}},[n("span",{staticClass:"icon-menu icon"})]),n("div",{staticClass:"icon-wrapper",on:{click:function(e){return t.showSetting(2)}}},[n("span",{staticClass:"icon-progress icon"})]),n("div",{staticClass:"icon-wrapper",on:{click:function(e){return t.showSetting(1)}}},[n("span",{staticClass:"icon-bright icon"})]),n("div",{staticClass:"icon-wrapper",on:{click:function(e){return t.showSetting(0)}}},[n("span",{staticClass:"icon-a icon"},[t._v("A")])])])]),n("transition",{attrs:{name:"slide-right"}},[n("contents-view",{directives:[{name:"show",rawName:"v-show",value:t.ifContentsShow,expression:"ifContentsShow"}],attrs:{navigation:t.navigation,bookAvailable:t.bookAvailable},on:{jumpTo:t.jumpTo}})],1),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.ifContentsShow,expression:"ifContentsShow"}],staticClass:"contents-mask",on:{click:t.hideContents}})])],1)},T=[],y=(n("a9e3"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contents"},[t.bookAvailable?n("div",{staticClass:"contents-wrapper"},t._l(t.navigation.toc,(function(e,i){return n("div",{key:i,staticClass:"contents-item",on:{click:function(n){return t.jumpTo(e.href)}}},[n("span",{staticClass:"text"},[t._v(" "+t._s(e.label)+" ")])])})),0):n("div",{staticClass:"empty"},[t._v(" 加载中... ")])])}),k=[],z={props:{navigation:Object,bookAvailable:Boolean},methods:{jumpTo:function(t){this.$emit("jumpTo",t)}}},A=z,_=(n("66d7"),Object(c["a"])(A,y,k,!1,null,"3e12d436",null)),x=_.exports,M={props:{ifTitleAndMenuShow:{type:Boolean,default:!1},fontSizeList:{type:Array},defaultFontSize:Number,themeList:Array,defaultTheme:Number,bookAvailable:Boolean,progress:Number,navigation:Object},data:function(){return{ifSettingShow:!1,previewTranslateLeft:void 0,previewTranslateRight:void 0,showTag:0,ifContentsShow:!1}},methods:{showSetting:function(t){this.showTag=t,3===this.showTag?(this.ifContentsShow=!0,this.ifSettingShow=!1):(this.ifContentsShow=!1,this.ifSettingShow=!0)},hideSetting:function(){this.ifSettingShow=!1},hideContents:function(){this.ifContentsShow=!1},centerFontSettingPreview:function(){var t,e=this;this.$refs.setting.setAttribute("id","moveAway"),this.ifSettingShow=!0,setTimeout((function(){t=e.$refs.select.querySelector(".line").getBoundingClientRect().width,e.ifSettingShow=!1,e.previewTranslateLeft="translateX(".concat(-t/2,"px)"),e.previewTranslateRight="translateX(".concat(t/2,"px)"),setTimeout((function(){e.$refs.setting.removeAttribute("id")}),600)}),500)},setFontSize:function(t){this.$emit("setFontSize",t)},setTheme:function(t){this.$emit("setTheme",t)},onProgressChange:function(t){this.$emit("onProgressChange",t.target.value),this.$refs.progress.style.backgroundSize="".concat(this.progress,"% 100%")},jumpTo:function(t){this.$emit("jumpTo",t)}},mounted:function(){this.centerFontSettingPreview()},components:{contentsView:x}},j=M,L=(n("8839"),Object(c["a"])(j,C,T,!1,null,"0b9aee34",null)),P=L.exports,O="./pg1342-images.epub",F={data:function(){return{ifTitleAndMenuShow:!1,fontSizeList:[{fontSize:12},{fontSize:14},{fontSize:16},{fontSize:18},{fontSize:20},{fontSize:22},{fontSize:24}],defaultFontSize:16,defaultTheme:0,themeList:[{name:"default",style:{body:{color:"#000",background:"#fff"}}},{name:"eye",style:{body:{color:"#000",background:"#ceeaba"}}},{name:"night",style:{body:{color:"#fff",background:"#121212"}}},{name:"gold",style:{body:{color:"#000",background:"rgb(241,236,226)"}}}],bookAvailable:!1,progress:0,navigation:null}},computed:{themeColor:function(){return this.themeList[this.defaultTheme].style.body.background}},methods:{showEpub:function(){var t=this;this.book=new p["a"](O),this.rendition=this.book.renderTo("read",{method:"continuous",width:window.innerWidth,height:window.innerHeight,resizeOnOrientationChange:!0}),this.rendition.display(),this.themes=this.rendition.themes,this.themes.fontSize(this.defaultFontSize+"px"),this.registerTheme(),this.setTheme(this.defaultTheme),this.book.ready.then((function(){return t.navigation=t.book.navigation,t.book.locations.generate()})).then((function(){t.locations=t.book.locations,t.bookAvailable=!0}))},lastPage:function(){this.rendition&&this.rendition.prev()},nextPage:function(){this.rendition&&this.rendition.next()},toggleTitleAndMenu:function(){this.ifTitleAndMenuShow=!this.ifTitleAndMenuShow,this.ifTitleAndMenuShow||this.$refs.menuBar.hideSetting()},hideTitleAndMenu:function(){this.ifTitleAndMenuShow=!1,this.$refs.menuBar.hideSetting(),this.$refs.menuBar.hideContents()},setFontSize:function(t){this.defaultFontSize=t,this.themes&&this.themes.fontSize(this.defaultFontSize+"px")},registerTheme:function(){var t=this;this.themeList.forEach((function(e){t.themes.register(e.name,e.style)}))},setTheme:function(t){console.log(t),this.defaultTheme=t,this.themes.select(this.themeList[t].name)},onProgressChange:function(t){var e=t/100,n=e>0?this.locations.cfiFromPercentage(e):0;this.rendition.display(n),this.progress=parseInt(t)},jumpTo:function(t){this.rendition.display(t),this.hideTitleAndMenu()}},mounted:function(){var t=this;this.showEpub(),window.addEventListener("resize",(function(){t.rendition.resize(window.innerWidth,window.innerHeight)})),document.onkeydown=function(e){37===e.keyCode?t.lastPage():39===e.keyCode&&t.nextPage()}},components:{TitleBar:b,MenuBar:P}},$=F,B=(n("be4c"),Object(c["a"])($,h,f,!1,null,"5d94dadc",null)),E=B.exports;n("3d0e"),n("c860");i["a"].config.productionTip=!1,i["a"].use(d["a"]);var N=[{path:"/",redirect:"/book"},{path:"/book",component:E}],D=new d["a"]({routes:N});new i["a"]({router:D,render:function(t){return t(u)}}).$mount("#app")},"66d7":function(t,e,n){"use strict";var i=n("42f4"),s=n.n(i);s.a},"780b":function(t,e,n){"use strict";var i=n("ae76"),s=n.n(i);s.a},8839:function(t,e,n){"use strict";var i=n("ddce"),s=n.n(i);s.a},ae76:function(t,e,n){},be4c:function(t,e,n){"use strict";var i=n("1458"),s=n.n(i);s.a},c860:function(t,e,n){},ddce:function(t,e,n){}});
//# sourceMappingURL=app.78060cd9.js.map